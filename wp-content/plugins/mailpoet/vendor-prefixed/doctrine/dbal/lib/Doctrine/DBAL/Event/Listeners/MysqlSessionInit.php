<?php
 namespace MailPoetVendor\Doctrine\DBAL\Event\Listeners; if (!defined('ABSPATH')) exit; use MailPoetVendor\Doctrine\DBAL\Event\ConnectionEventArgs; use MailPoetVendor\Doctrine\DBAL\Events; use MailPoetVendor\Doctrine\Common\EventSubscriber; class MysqlSessionInit implements \MailPoetVendor\Doctrine\Common\EventSubscriber { private $_charset; private $_collation; public function __construct($charset = 'utf8', $collation = \false) { $this->_charset = $charset; $this->_collation = $collation; } public function postConnect(\MailPoetVendor\Doctrine\DBAL\Event\ConnectionEventArgs $args) { $collation = $this->_collation ? " COLLATE " . $this->_collation : ""; $args->getConnection()->executeUpdate("SET NAMES " . $this->_charset . $collation); } public function getSubscribedEvents() { return array(\MailPoetVendor\Doctrine\DBAL\Events::postConnect); } } 